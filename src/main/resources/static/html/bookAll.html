<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전체도서</title>
    <link rel="stylesheet" href="../css/init.css">
    <link rel="stylesheet" href="../css/header.css">
    <link rel="stylesheet" href="../css/bookAll.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gugi&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="title"><a href="index.html" class="gugi-regular">세모책</a></div>
            <div class="topMenu">
                <ul>
                    <li><a href="bookAll.html">전체도서</a></li>
                    <li><a href="#">국내도서</a></li>
                    <li><a href="#">외국도서</a></li>
                </ul>
            </div>
            <div class="spacer">사용자 이모지</div>
        </header>
        <section>
            <div class="bookMenu">
                <ul>
                    <li><a>전체도서</a></li>
                    <li><a>국내도서</a></li>
                    <li><a>외국도서</a></li>
                </ul>
            </div>
            <div id="books">
                
            </div>
        </section>
        <footer>푸터</footer>
    </div>
</body>
<script>
    document.addEventListener("DOMContentLoaded", async() => {
        const bookList = document.getElementById("books");

        try {
            const response = await axios.get("http://localhost:8080/books");

            const books = response.data._embedded?.bookDTOList || [];
            books.forEach(book => {
                const div = document.createElement("div")
                div.innerHTML = `<strong>${book.title}</strong> - ${book.author}`
                bookList.appendChild(div);
            })
        } catch (err) {
            bookList.innerHTML = err;
        }
    })
</script>
</html>